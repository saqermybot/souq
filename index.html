<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Souq Syria</title>

  <link rel="stylesheet" href="./base.css">
  <link rel="stylesheet" href="./components.css">

  <script>
    document.documentElement.setAttribute("data-theme", "dark");
  </script>
</head>
<body>

  <header class="topbar">
    <div class="brand">
      <span class="dot"></span>
      Souq Syria
    </div>
    <div id="authBar" class="authbar"></div>
  </header>

  <main class="container">

    <!-- SEARCH + FILTERS (DELUXE) -->
    <section class="card searchCard deluxeFilters">

      <!-- Header صغير للفلتر (فخم + مكان لزر طي/فتح لاحقاً) -->
      <div class="filterHead">
        <div class="filterTitle">فلترة سريعة</div>

        <!-- زر طي/فتح (اختياري - إذا ما بدك سلوك JS هلأ بيضل شكلي فقط) -->
        <button id="btnToggleFilters" class="ghost sm" type="button">إظهار/إخفاء</button>
      </div>

      <!-- محتوى الفلاتر -->
      <div class="formGrid" id="filtersBody">

        <div class="field span2">
          <label class="flabel">عن ماذا تبحث؟</label>
          <input id="qSearch" placeholder="بحث عن إعلان..." />
        </div>

        <div class="field">
          <label class="flabel">المدينة</label>
          <select id="cityFilter"></select>
        </div>

        <div class="field">
          <label class="flabel">القسم</label>
          <select id="catFilter"></select>
        </div>

        <!-- ✅ الأزرار لازم تكون Grid لتظل جنب بعض بالموبايل -->
        <div class="actionsGrid span2">
          <button id="btnApply" class="secondary" type="button">تطبيق</button>
          <button id="btnReset" class="ghost" type="button">مسح</button>
        </div>

        <div class="muted small span2" style="margin-top:2px">
          ملاحظة: الموقع يعرض كل الإعلانات تلقائياً، الفلاتر تُفعَّل فقط عند الضغط على "تطبيق".
        </div>

      </div>
    </section>

    <!-- LISTINGS -->
    <section class="card">
      <div class="sectionHead">
        <h3>الإعلانات</h3>
        <button id="btnMore" class="secondary" type="button">تحميل المزيد</button>
      </div>

      <div id="listings" class="cardsGrid"></div>

      <div id="emptyState" class="muted small" style="display:none;margin-top:10px">
        لا يوجد نتائج حالياً
      </div>
    </section>

    <!-- DETAILS PAGE -->
    <section id="detailsPage" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnBack" class="ghost" type="button">رجوع</button>
          <button id="btnShare" class="secondary" type="button">مشاركة</button>
        </div>

        <div class="gallery">
          <button id="gPrev" class="gbtn" type="button">‹</button>
          <img id="gImg" class="gimg" alt="image" />
          <button id="gNext" class="gbtn" type="button">›</button>
        </div>

        <div id="gDots" class="dots"></div>

        <h2 id="dTitle"></h2>
        <div class="muted" id="dMeta"></div>
        <div class="price" id="dPrice"></div>
        <p id="dDesc"></p>

        <div class="row actions">
          <button id="btnChat" type="button">مراسلة</button>
          <button id="btnDeleteListing" class="danger hidden" type="button">حذف الإعلان</button>
        </div>
      </div>
    </section>

    <!-- INBOX PAGE -->
    <section id="inboxPage" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnInboxBack" class="ghost" type="button">رجوع</button>
          <h3 style="margin:0">الرسائل</h3>
          <button id="btnInboxRefresh" class="secondary" type="button">تحديث</button>
        </div>

        <div id="inboxList" class="inboxList"></div>

        <div id="inboxEmpty" class="muted small" style="display:none;margin-top:10px">
          لا يوجد محادثات حالياً
        </div>
      </div>
    </section>

    <!-- ADD LISTING -->
    <section id="addBox" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnAddBack" class="ghost" type="button">رجوع</button>
          <div class="muted small" id="uploadStatus"></div>
        </div>

        <h2>إعلان جديد</h2>

        <input id="aTitle" placeholder="العنوان" />
        <textarea id="aDesc" placeholder="الوصف" rows="4"></textarea>

        <div class="grid">
          <input id="aPrice" type="number" placeholder="السعر" />
          <select id="aCurrency">
            <option value="SYP">SYP</option>
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
          </select>
        </div>

        <div class="grid">
          <select id="aCity"></select>
          <select id="aCat"></select>
        </div>

        <div class="muted small">اختر من 1 إلى 3 صور (حد أقصى 3)</div>
        <input id="aImages" type="file" accept="image/*" multiple />
        <div id="imgPreview" class="preview"></div>

        <div class="row actions">
          <button id="btnPublish" type="button">نشر</button>
          <button id="btnClear" class="secondary" type="button">مسح</button>
        </div>
      </div>
    </section>

    <!-- CHAT -->
    <section id="chatBox" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnChatBack" class="ghost" type="button">رجوع</button>
          <h3 id="chatTitle" style="margin:0">محادثة</h3>
        </div>

        <div id="chatMsgs" class="chatmsgs"></div>

        <div class="row">
          <input id="chatInput" placeholder="اكتب رسالة..." />
          <button id="btnSend" type="button">إرسال</button>
        </div>

        <p class="muted small">المحادثات تُحذف تلقائيًا لاحقاً (ميزة قادمة).</p>
      </div>
    </section>

  </main>

  <!-- AUTH MODAL -->
  <div id="authModal" class="modal hidden">
    <div class="modalCard">
      <div class="modalHead">
        <div style="font-weight:900">تسجيل الدخول</div>
        <button id="btnCloseAuth" class="ghost" type="button">إغلاق</button>
      </div>

      <div class="row">
        <input id="email" placeholder="Email" autocomplete="email" />
      </div>

      <div class="row" style="margin-top:10px">
        <input id="password" type="password" placeholder="Password" autocomplete="current-password" />
      </div>

      <div class="row actions" style="margin-top:12px">
        <button id="btnLogin" type="button">دخول</button>
        <button id="btnRegister" class="secondary" type="button">تسجيل</button>
      </div>

      <button id="btnGoogle" class="secondary full" style="margin-top:10px" type="button">دخول عبر Google</button>
      <p class="muted small" style="margin-top:8px">Email + Google</p>
    </div>
  </div>

  <!-- IMAGE MODAL -->
  <div id="imgModal" class="imgModal hidden">
    <div class="imgTop">
      <div id="imgCounter" class="imgCounter"></div>
      <button id="imgClose" class="ghost" type="button">إغلاق</button>
    </div>

    <button id="imgPrev" class="imgNav" type="button">‹</button>
    <img id="imgFull" class="imgFull" alt="full" />
    <button id="imgNext" class="imgNav" type="button">›</button>
  </div>

  <script type="module" src="./app.js?v=20260104_01"></script>
</body>
</html>