<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Souq Syria</title>

  <link rel="stylesheet" href="./base.css">
  <link rel="stylesheet" href="./components.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@23.8.0/build/css/intlTelInput.css">

  <script>
    document.documentElement.setAttribute("data-theme", "dark");
  </script>

  <!-- โ TAGLINE STYLE (ูุญูู ููุถููู) -->
  <style>
    .filterHead{
      display:block;
    }

    .filterHeadTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
    }

    .siteTagline{
      display:block;
      margin:6px 0 14px;
      padding-inline-start:2px;
      font-size:.78rem;
      color:rgba(34,197,94,.75);
      text-align:right;
      direction:rtl;
      line-height:1.6;
    }
  </style>

<style>
  .fab-add{
    position: fixed;
    bottom: 18px;
    left: 18px;
    z-index: 9999;
    border: 0;
    border-radius: 999px;
    padding: 12px 16px;
    font-size: 15px;
    cursor: pointer;
    background: #2563eb;
    color: #fff;
    box-shadow: 0 10px 24px rgba(0,0,0,.35);
  }
  .fab-add:active{ transform: translateY(1px); }
  /* Phone input (intl-tel-input) */
  .iti{ width:100%; direction:ltr; }
  .iti input{ width:100%; }
  .iti__country-list{ direction:ltr; }

  /* =========================
     Admin-only UI
     Guests should never see Logout / Google login buttons
  ========================= */
  .adminOnly{ display:none !important; }
  body.is-admin .adminOnly{ display: inline-flex !important; }
  body.is-admin #userMenu .adminOnly{ display:flex !important; }

</style>


</head>

<body>

<header class="topbar">
  <div class="brand">
    <span class="dot"></span>
    Souq Syria
  </div>

  <!-- โ auth + avatar menu -->
  <div class="authbar" style="display:flex; align-items:center; gap:10px;">
    <div id="authBar"></div>

    <!-- โ ุตูุฑุฉ ุงูุญุณุงุจ + ูููู -->
    <div class="userMenuWrap" id="userMenuWrap" style="display:none;">
      <img
        id="userAvatar"
        class="avatar"
        src="./img/falcon.png"
        alt="account"
        style="width:38px;height:38px;border-radius:999px;object-fit:cover;border:1px solid rgba(255,255,255,.12);cursor:pointer;"
      />

      <div id="userMenu" class="userMenu hidden">
        <button type="button" data-act="myListings">๐ฆ ุฅุนูุงูุงุชู</button>
        <button type="button" data-act="favorites">โญ ููุถูุชู</button>
        <button type="button" data-act="profile">๐ค ุจุฑููุงููู</button>
        <hr />
        <button type="button" data-act="logout" class="danger adminOnly" id="logoutBtn">๐ช ุชุณุฌูู ุฎุฑูุฌ</button>
      </div>
    </div>
  </div>
</header>

<main class="container">
  <!-- SEARCH + FILTERS (DELUXE) -->
  <section class="card searchCard deluxeFilters">

    <div class="filterHead">

      <div class="filterHeadTop">
        <div class="filterTitle">ููุชุฑุฉ ุณุฑูุนุฉ</div>

        <div class="filterHeadActions">
          <button id="btnReset" class="ghost sm resetMini" type="button" aria-label="ูุณุญ ุงูููุงุชุฑ">
            ูุณุญ
          </button>
          <button id="btnToggleFilters" class="ghost sm" type="button" aria-label="ูุชุญ/ุฅุฎูุงุก ุงูููุงุชุฑ">
            โ
          </button>
        </div>
      </div>

      <p class="siteTagline">
        ุณูู ุณูุฑูุง โ ุงูููุตุฉ ุงูุณูุฑูุฉ ููุจูุน ูุงูุฅูุฌุงุฑ (ุฌุฏูุฏ ููุณุชุนูู)
      </p>

    </div>

      <div class="formGrid" id="filtersBody">

        <div class="field span2">
          <label class="flabel">ุนู ูุงุฐุง ุชุจุญุซุ</label>
          <input id="qSearch" placeholder="ุจุญุซ ุนู ุฅุนูุงู..." />
        </div>

        <div class="field">
          <label class="flabel">ุงููุฏููุฉ</label>
          <select id="cityFilter"></select>
        </div>

        <div class="field">
          <label class="flabel">ุงููุณู</label>
          <select id="catFilter"></select>
        </div>

        <!-- โ ููุน ุงูุฅุนูุงู (Segemented) -->
        <div class="field span2">
          <label class="flabel">ููุน ุงูุฅุนูุงู</label>

          <div class="segWrap" role="group" aria-label="ููุน ุงูุฅุนูุงู">
            <button id="typeAll" class="segBtn active" type="button">ุงููู</button>
            <button id="typeSale" class="segBtn" type="button">ุจูุน</button>
            <button id="typeRent" class="segBtn" type="button">ุฅูุฌุงุฑ</button>
          </div>

          <input id="typeFilter" type="hidden" value="">
        </div>

        <!-- โ ุณูุฉ ุงูุณูุงุฑุงุช (ูู/ุฅูู) -->
        <div id="carFilters" class="field span2 hidden">
          <label class="flabel">ุณูุฉ (ุณูุงุฑุงุช)</label>
          <div class="range2">
            <input id="yearFrom" type="number" min="1950" max="2035" placeholder="ูู" />
            <input id="yearTo" type="number" min="1950" max="2035" placeholder="ุฅูู" />
          </div>
        </div>

        <!-- โ ููุงุชุฑ ุงูุนูุงุฑุงุช -->
        <div id="estateFilters" class="field span2 hidden">
          <label class="flabel">ุชูุงุตูู ุงูุนูุงุฑ</label>
          <div class="range2">
            <select id="estateKindFilter">
              <option value="">ูู ุฃููุงุน ุงูุนูุงุฑุงุช</option>
              <option value="ุดูุฉ">ุดูุฉ</option>
              <option value="ูุญู">ูุญู</option>
              <option value="ุฃุฑุถ">ุฃุฑุถ</option>
              <option value="ุจูุช">ุจูุช</option>
            </select>

            <input id="roomsFilter" type="number" min="0" max="20" placeholder="ุบุฑู" />
          </div>
        </div>

        <!-- โ ุชูุงุตูู ุงูุฅููุชุฑูููุงุช (ููุน ุงูุฌูุงุฒ) -->
        <div id="electFilters" class="field span2 hidden">
          <label class="flabel">ููุน ุงูุฅููุชุฑูููุงุช</label>
          <select id="electKindFilter">
            <option value="">ูู ุงูุฃููุงุน</option>
            <option value="ููุจุงูู">ููุจุงูู</option>
            <option value="ุชููุฒููู">ุชููุฒููู</option>
            <option value="ููุจููุชุฑ">ููุจููุชุฑ</option>
            <option value="ุฃูุนุงุจ">ุฃูุนุงุจ (ุจูุงูุณุชูุดู)</option>
          </select>
        </div>

        <div class="muted small span2" style="margin-top:2px">
          ููุงุญุธุฉ: ุงูููุงุชุฑ ุชุนูู ูุจุงุดุฑุฉ. ููููู ูุณุญ ูู ุงูููุงุชุฑ ุจุฒุฑ "ูุณุญ" ุจุงูุฃุนูู.
        </div>

      </div>
    </section>

    <!-- LISTINGS -->
    <section class="card">
      <div class="sectionHead">
        <h3>ุงูุฅุนูุงูุงุช</h3>
        <button id="btnMore" class="secondary" type="button">ุชุญููู ุงููุฒูุฏ</button>
      </div>

      <div id="listings" class="cardsGrid"></div>

      <div id="emptyState" class="muted small" style="display:none;margin-top:10px">
        ูุง ููุฌุฏ ูุชุงุฆุฌ ุญุงููุงู
      </div>
    </section>

    <!-- DETAILS PAGE -->
    <section id="detailsPage" class="page hidden">
      <div class="pageInner">

        <div class="pageHead card" style="margin:0 0 10px;">
          <button id="btnBack" class="ghost" type="button">ุฑุฌูุน</button>
          <button id="btnShare" class="secondary" type="button">ูุดุงุฑูุฉ</button>
        </div>

        <div class="detailsWrap">
          <div class="detailsHero">
            <img id="gImg" class="gimg" alt="image" />

            <div class="heroTop">
              <div id="heroCounter" class="heroBadge">1/1</div>

              <button id="btnFav" class="heroFav" type="button" aria-label="ุฅุถุงูุฉ ููููุถูุฉ">
                <span class="heartIcon" aria-hidden="true">โฅ</span>
                <span id="dFavCount" class="favCountBadge">0</span>
              </button>
            </div>

            <button id="gPrev" class="gbtn" type="button">โน</button>
            <button id="gNext" class="gbtn" type="button">โบ</button>
          </div>

          <!-- keep dots for existing JS (hidden visually) -->
          <div id="gDots" class="dots hidden"></div>

          <div class="detailsBody">
            <div id="dStats" class="detailsMeta"></div>
            <h2 id="dTitle" class="detailsTitle"></h2>
            <div id="dMeta" class="detailsMeta"></div>
            <div id="dSeller" class="detailsMeta"></div>
            <div id="dPrice" class="detailsPrice"></div>

            <div class="detailsCard">
              <h3>ุงููุตู</h3>
              <p id="dDesc" class="descText"></p>
              <button id="btnReadMore" class="linkBtn hidden" type="button">ูุฑุงุกุฉ ุงููุฒูุฏ</button>
            </div>

            <div class="detailsCard">
              <h3>ูุนูููุงุช ุงูุฅุนูุงู</h3>
              <div id="dInfo" class="infoGrid"></div>
            </div>

            <!-- keep wrong whatsapp report button (hidden) for existing JS -->
            <button id="btnReportWhatsapp" class="ghost hidden" type="button">๐ซ ุงูุฅุจูุงุบ ุนู ุฑูู ุฎุงุทุฆ</button>

            <button id="btnDeleteListing" class="danger hidden" type="button" style="margin-top:12px;">ุญุฐู ุงูุฅุนูุงู</button>
          </div>

          <div class="actionBar">
            <button id="btnChat" class="btnMain" type="button">ูุฑุงุณูุฉ</button>
            <a id="btnWhatsapp" class="btnMain secondary hidden" href="#" target="_blank" rel="noopener">ูุงุชุณุงุจ</a>
            <button id="btnReportListing" class="btnMini ghost" type="button">ุชุจููุบ</button>
          </div>
        </div>
      </div>
    </section>

    <!-- โ Toast -->
    <div id="toast" class="toast hidden" aria-live="polite"></div>

    <!-- INBOX PAGE -->
    <section id="inboxPage" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnInboxBack" class="ghost" type="button">ุฑุฌูุน</button>
          <h3 style="margin:0">ุงูุฑุณุงุฆู</h3>
          <button id="btnInboxRefresh" class="secondary" type="button">ุชุญุฏูุซ</button>
        </div>

        <div id="inboxList" class="inboxList"></div>

        <div id="inboxEmpty" class="muted small" style="display:none;margin-top:10px">
          ูุง ููุฌุฏ ูุญุงุฏุซุงุช ุญุงููุงู
        </div>
      </div>
    </section>

    <!-- ADD LISTING -->
    <section id="addBox" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnAddBack" class="ghost" type="button">ุฑุฌูุน</button>
          <div class="muted small" id="uploadStatus"></div>
        </div>

        <h2>ุฅุนูุงู ุฌุฏูุฏ</h2>

        <input id="aTitle" placeholder="ูุงุฐุง ุชุจูุนุ (ูุซุงู: ููุจุงูู ุณุงูุณููุบ A51)" />
        <textarea id="aDesc" placeholder="ุงููุตู" rows="4"></textarea>

        <label class="lbl" for="aPhone">ุฑูู ุงููุงุชู / ูุงุชุณุงุจ (ุงุฎุชูุงุฑู)</label>
        <input id="aPhone" type="tel" placeholder="ุงุฎุชูุงุฑู: ุงุฎุชุฑ ุงูุจูุฏ ุซู ุงูุชุจ ุฑููู" autocomplete="tel" />
        <input id="aPhoneE164" type="hidden" />
        <div class="muted small" style="margin-top:6px">ุงุฎุชูุงุฑู: ุฅุฐุง ูุถุนุช ุฑููู ุณูุธูุฑ ุฏุงุฎู ุงูุฅุนูุงู ููุชูุงุตู ุนุจุฑ ูุงุชุณุงุจ/ุงุชุตุงู. ููููู ุฃูุถุงู ุงูุงุนุชูุงุฏ ุนูู ุงููุฑุงุณูุฉ ุฏุงุฎู ุงููููุน.</div>

        <div class="grid">
          <input id="aPrice" type="number" placeholder="ุงูุณุนุฑ" />
          <select id="aCurrency">
            <option value="ู.ุณ">SYP</option>
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
          </select>
        </div>

        <div class="grid">
          <select id="aCity"></select>
          <select id="aCat"></select>
        </div>

        <div class="muted small">ุงุฎุชุฑ ูู 1 ุฅูู 3 ุตูุฑ (ุญุฏ ุฃูุตู 3)</div>
        <input id="aImages" type="file" accept="image/*" multiple />
        <div id="imgPreview" class="preview"></div>

        <div class="row actions">
          <button id="btnPublish" type="button">ูุดุฑ</button>
          <button id="btnClear" class="secondary" type="button">ูุณุญ</button>
        </div>
      </div>
    </section>

    <!-- CHAT -->
    <section id="chatBox" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnChatBack" class="chatCloseBtn" type="button" aria-label="ุฅุบูุงู">โ</button>
          <div class="chatHeadText">
            <h3 id="chatTitle" style="margin:0">ูุญุงุฏุซุฉ</h3>
            <div class="chatMeta" aria-label="ูุนูููุงุช ุงููุญุงุฏุซุฉ">
              <a id="chatUserLink" class="chatMetaLink" href="#" rel="noopener">ุงููุณุชุฎุฏู</a>
              <span class="chatMetaSep">โข</span>
              <a id="chatListingLink" class="chatMetaLink" href="#" rel="noopener">ุงูุฅุนูุงู</a>
            </div>
          </div>
        </div>

        <div id="chatMsgs" class="chatmsgs"></div>

        <div class="row">
          <input id="chatInput" placeholder="ุงูุชุจ ุฑุณุงูุฉ..." />
          <button id="btnSend" type="button">ุฅุฑุณุงู</button>
        </div>

        <p class="muted small">ุงููุญุงุฏุซุงุช ุชูุญุฐู ุชููุงุฆููุง ูุงุญูุงู (ููุฒุฉ ูุงุฏูุฉ).</p>
      </div>
    </section>

  </main>

  <!-- AUTH MODAL -->
    <div id="authModal" class="modal hidden">
    <div class="modalCard">
      <div class="modalHead">
        <div style="font-weight:900">ุฏุฎูู ุงูุฃุฏูู</div>
        <button id="btnCloseAuth" class="ghost" type="button">ุฅุบูุงู</button>
      </div>

      <div class="row">
        <input id="email" placeholder="Email" autocomplete="email" />
      </div>

      <div class="row" style="margin-top:10px">
        <input id="password" type="password" placeholder="Password" autocomplete="current-password" />
      </div>

      <div class="row actions" style="margin-top:12px">
        <button id="btnLogin" type="button">ุฏุฎูู</button>
      </div>

      <p class="muted small" style="margin-top:10px">
        ูุฐุง ุงูุฏุฎูู ูุฎุตุต ููุฅุฏุงุฑุฉ ููุท. ุงููุณุชุฎุฏููู ูุชุตูุญูู ูููุดุฑูู ููุชูุงุตููู ูุฒูุงุฑ ุจุฏูู ุชุณุฌูู.
      </p>
    </div>
  </div>

  <!-- IMAGE MODAL -->
  <div id="imgModal" class="imgModal hidden">
    <div class="imgTop">
      <div id="imgCounter" class="imgCounter"></div>
      <button id="imgClose" class="ghost" type="button">ุฅุบูุงู</button>
    </div>

    <button id="imgPrev" class="imgNav" type="button">โน</button>
    <img id="imgFull" class="imgFull" alt="full" />
    <button id="imgNext" class="imgNav" type="button">โบ</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@23.8.0/build/js/intlTelInput.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@23.8.0/build/js/utils.js"></script>

  <script type="module" src="./app.js?v=20260109_20"></script>

  <!-- โ FAB: Add Listing (always visible) -->
  <button id="fabAddListing" class="fab-add" type="button" aria-label="ุฅุถุงูุฉ ุฅุนูุงู">โ ุฅุถุงูุฉ ุฅุนูุงู</button>
  <script>
    (function(){
      var b = document.getElementById('fabAddListing');
      if(!b) return;
      b.addEventListener('click', function(){
        try { window.UI && UI.actions && UI.actions.openAdd && UI.actions.openAdd(); }
        catch(e){}
      });
    })();
  </script>

</body>
</html>