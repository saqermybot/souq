<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Souq Syria</title>

  <link rel="stylesheet" href="./base.css">
  <link rel="stylesheet" href="./components.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@23.8.0/build/css/intlTelInput.css">

  <script>
    document.documentElement.setAttribute("data-theme", "dark");
  </script>

  <!-- âœ… TAGLINE STYLE (Ù…Ø­Ù„ÙŠ ÙˆÙ…Ø¶Ù…ÙˆÙ†) -->
  <style>
    .filterHead{
      display:block;
    }

    .filterHeadTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
    }

    .siteTagline{
      display:block;
      margin:6px 0 14px;
      padding-inline-start:2px;
      font-size:.78rem;
      color:rgba(34,197,94,.75);
      text-align:right;
      direction:rtl;
      line-height:1.6;
    }
  </style>

<style>
  .fab-add{
    position: fixed;
    bottom: 18px;
    left: 18px;
    z-index: 9999;
    border: 0;
    border-radius: 999px;
    padding: 12px 16px;
    font-size: 15px;
    cursor: pointer;
    background: #2563eb;
    color: #fff;
    box-shadow: 0 10px 24px rgba(0,0,0,.35);
  }
  .fab-add:active{ transform: translateY(1px); }
  /* Phone input (intl-tel-input) */
  .iti{ width:100%; direction:ltr; }
  .iti input{ width:100%; }
  .iti__country-list{ direction:ltr; }

  /* ===== Place picker (Add Listing) ===== */
  .placeRow{ display:flex; gap:10px; margin-top:10px; }
  .placeRow button{ flex:1; height:44px; border-radius:14px; }
  .placePreview{ margin-top:8px; padding:10px 12px; border-radius:14px; background: rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.06); }

  /* ===== Map modal (lazy loaded Leaflet) ===== */
  .mapModal{ position:fixed; inset:0; z-index:10000; background: rgba(0,0,0,.55); display:flex; align-items:flex-end; justify-content:center; padding:12px; }
  .mapModal.hidden{ display:none; }
  .mapCard{ width:min(720px, 100%); background: rgba(10,14,22,.98); border:1px solid rgba(255,255,255,.12); border-radius:18px; overflow:hidden; }
  .mapHead{ display:flex; align-items:center; justify-content:space-between; padding:12px 12px; }
  .mapHead .title{ font-weight:900; }
  #pickMap{ height: 52vh; width:100%; }
  .mapFoot{ display:flex; gap:10px; padding:12px; }
  .mapFoot button{ flex:1; height:46px; border-radius:14px; }

  /* =========================
     Admin-only UI
     Guests should never see Logout / Google login buttons
  ========================= */
  .adminOnly{ display:none !important; }
  body.is-admin .adminOnly{ display: inline-flex !important; }
  body.is-admin #userMenu .adminOnly{ display:flex !important; }

</style>


</head>

<body>

<header class="topbar">
  <div class="brand">
    <span class="dot"></span>
    Souq Syria
  </div>

  <!-- âœ… auth + avatar menu -->
  <div class="authbar" style="display:flex; align-items:center; gap:10px;">
    <div id="authBar"></div>

    <!-- âœ… ØµÙˆØ±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ + Ù…Ù†ÙŠÙˆ -->
    <div class="userMenuWrap" id="userMenuWrap" style="display:none;">
      <img
        id="userAvatar"
        class="avatar"
        src="./img/falcon.png"
        alt="account"
        style="width:38px;height:38px;border-radius:999px;object-fit:cover;border:1px solid rgba(255,255,255,.12);cursor:pointer;"
      />

      <div id="userMenu" class="userMenu hidden">
        <button type="button" data-act="myListings">ğŸ“¦ Ø¥Ø¹Ù„Ø§Ù†Ø§ØªÙŠ</button>
        <button type="button" data-act="favorites">â­ Ù…ÙØ¶Ù„ØªÙŠ</button>
        <button type="button" data-act="profile">ğŸ‘¤ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ÙŠ</button>
        <hr />
        <button type="button" data-act="logout" class="danger adminOnly" id="logoutBtn">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
      </div>
    </div>
  </div>
</header>

<main class="container">
  <!-- SEARCH + FILTERS (DELUXE) -->
  <section class="card searchCard deluxeFilters">

    <div class="filterHead">

      <div class="filterHeadTop">
        <div class="filterTitle">ÙÙ„ØªØ±Ø© Ø³Ø±ÙŠØ¹Ø©</div>

        <div class="filterHeadActions">
          <button id="btnReset" class="ghost sm resetMini" type="button" aria-label="Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±">
            Ù…Ø³Ø­
          </button>
          <button id="btnToggleFilters" class="ghost sm" type="button" aria-label="ÙØªØ­/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙÙ„Ø§ØªØ±">
            âŒ„
          </button>
        </div>
      </div>

      <p class="siteTagline">
        Ø³ÙˆÙ‚ Ø³ÙˆØ±ÙŠØ§ â€” Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ù„Ù„Ø¨ÙŠØ¹ ÙˆØ§Ù„Ø¥ÙŠØ¬Ø§Ø± (Ø¬Ø¯ÙŠØ¯ ÙˆÙ…Ø³ØªØ¹Ù…Ù„)
      </p>

    </div>

      <div class="formGrid" id="filtersBody">

        <div class="field span2">
          <input id="qSearch" placeholder="Ø¹Ù† Ù…Ø§Ø°Ø§ ØªØ¨Ø­Ø«ØŸ (Ø¨Ø­Ø« Ø¹Ù† Ø¥Ø¹Ù„Ø§Ù†...)" />
        </div>

        <!-- âœ… (Ù…ÙØ±ØªÙ‘Ø¨Ø©) Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© + Ø§Ù„Ù‚Ø³Ù… Ø¬Ù†Ø¨ Ø¨Ø¹Ø¶ -->
        <div class="field span2">
          <div class="range2 keep2">
            <div class="select-wrapper">
              <select id="cityFilter" aria-label="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"></select>
              <span class="arrow">â€º</span>
            </div>
            <div class="select-wrapper">
              <select id="catFilter" aria-label="Ø§Ù„Ù‚Ø³Ù…"></select>
              <span class="arrow">â€º</span>
            </div>
          </div>
        </div>

        <!-- âœ… Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† (Segemented) -->
        <div id="typeField" class="field span2 hidden">
          <div class="segWrap" role="group" aria-label="Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†">
            <button id="typeAll" class="segBtn active" type="button">Ø§Ù„ÙƒÙ„</button>
            <button id="typeSale" class="segBtn" type="button">Ø¨ÙŠØ¹</button>
            <button id="typeRent" class="segBtn" type="button">Ø¥ÙŠØ¬Ø§Ø±</button>
          </div>

          <input id="typeFilter" type="hidden" value="">
        </div>

        <!-- âœ… Ø³Ù†Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª (Ù…Ù†/Ø¥Ù„Ù‰) -->
        <div id="carFilters" class="field span2 hidden">
          
          <div class="range2">
            <div class="select-wrapper">
              <select id="yearFrom">
                <option value="">Ù…Ù†</option>
              </select>
              <span class="arrow">â€º</span>
            </div>
            <div class="select-wrapper">
              <select id="yearTo">
                <option value="">Ø¥Ù„Ù‰</option>
              </select>
              <span class="arrow">â€º</span>
            </div>
          </div>
        </div>

        <!-- âœ… ÙÙ„Ø§ØªØ± Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª -->
        <div id="estateFilters" class="field span2 hidden">
          
          <div class="range2">
            <div class="select-wrapper">
              <select id="estateKindFilter">
                <option value="">ÙƒÙ„ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</option>
                <option value="Ø´Ù‚Ø©">Ø´Ù‚Ø©</option>
                <option value="Ù…Ø­Ù„">Ù…Ø­Ù„</option>
                <option value="Ø£Ø±Ø¶">Ø£Ø±Ø¶</option>
                <option value="Ø¨ÙŠØª">Ø¨ÙŠØª</option>
              </select>
              <span class="arrow">â€º</span>
            </div>

            <div class="select-wrapper">
              <select id="roomsFilter">
                <option value="">Ø¹Ø¯Ø¯ Ø§Ù„ØºØ±Ù</option>
              </select>
              <span class="arrow">â€º</span>
            </div>
          </div>
        </div>

        <!-- âœ… ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª (Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²) -->
        <div id="electFilters" class="field span2 hidden">
          <label class="flabel">Ù†ÙˆØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</label>
          <div class="select-wrapper">
            <select id="electKindFilter">
              <option value="">ÙƒÙ„ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹</option>
              <option value="mobiles">Ù…ÙˆØ¨Ø§ÙŠÙ„Ø§Øª</option>
              <option value="tv">ØªÙ„ÙØ²ÙŠÙˆÙ†Ø§Øª</option>
              <option value="computers">ÙƒÙ…Ø¨ÙŠÙˆØªØ±</option>
              <option value="games">Ø£Ù„Ø¹Ø§Ø¨ (Ø¨Ù„Ø§ÙŠØ³ØªÙŠØ´Ù†)</option>
            </select>
            <span class="arrow">â€º</span>
          </div>
        </div>
        <!-- âœ… Ù…Ù„Ø§Ø¨Ø³/Ø£Ø­Ø°ÙŠØ©: Ø±Ø¬Ø§Ù„ÙŠ/Ù†Ø³Ø§Ø¦ÙŠ/ÙˆÙ„Ø§Ø¯ÙŠ -->
        <div id="fashionFilters" class="field span2 hidden">
          <div class="select-wrapper">
            <select id="fashionGenderFilter" aria-label="Ø§Ù„ÙØ¦Ø© (Ù…Ù„Ø§Ø¨Ø³)">
              <option value="">Ø§Ù„ÙØ¦Ø© (Ø±Ø¬Ø§Ù„ÙŠ / Ù†Ø³Ø§Ø¦ÙŠ / ÙˆÙ„Ø§Ø¯ÙŠ)</option>
              <option value="Ø±Ø¬Ø§Ù„ÙŠ">Ø±Ø¬Ø§Ù„ÙŠ</option>
              <option value="Ù†Ø³Ø§Ø¦ÙŠ">Ù†Ø³Ø§Ø¦ÙŠ</option>
              <option value="ÙˆÙ„Ø§Ø¯ÙŠ">ÙˆÙ„Ø§Ø¯ÙŠ</option>
            </select>
            <span class="arrow">â€º</span>
          </div>
        </div>


        <div class="muted small span2" style="margin-top:2px">
          Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„ÙÙ„Ø§ØªØ± ØªØ¹Ù…Ù„ Ù…Ø¨Ø§Ø´Ø±Ø©. ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„ÙÙ„Ø§ØªØ± Ø¨Ø²Ø± "Ù…Ø³Ø­" Ø¨Ø§Ù„Ø£Ø¹Ù„Ù‰.
        </div>

      </div>
    </section>

    <!-- LISTINGS -->
    <section class="card">
      <div class="sectionHead">
        <h3>Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h3>
        <button id="btnMore" class="secondary" type="button">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯</button>
      </div>

      <div id="listings" class="cardsGrid"></div>

      <div id="emptyState" class="muted small" style="display:none;margin-top:10px">
        Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø­Ø§Ù„ÙŠØ§Ù‹
      </div>
    </section>

    <!-- DETAILS PAGE -->
    <section id="detailsPage" class="page hidden">
      <div class="pageInner">

        <div class="pageHead card" style="margin:0 0 10px;">
          <button id="btnBack" class="ghost" type="button">Ø±Ø¬ÙˆØ¹</button>
          <button id="btnShare" class="secondary" type="button">Ù…Ø´Ø§Ø±ÙƒØ©</button>
        </div>

        <div class="detailsWrap">
          <div class="detailsHero">
            <img id="gImg" class="gimg" alt="image" />

            <div id="heroCounter" class="heroBadge">1/1</div>

            <button id="btnFav" class="heroFav" type="button" aria-label="Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø©">
              <span class="heartIcon" aria-hidden="true">â™¥</span>
              <span id="dFavCount" class="favCountBadge">0</span>
            </button>

            <button id="gPrev" class="gbtn" type="button">â€¹</button>
            <button id="gNext" class="gbtn" type="button">â€º</button>
          </div>

          <!-- keep dots for existing JS (hidden visually) -->
          <div id="gDots" class="dots hidden"></div>

          <div class="detailsBody">
            <div id="dStats" class="detailsMeta"></div>
            <h2 id="dTitle" class="detailsTitle"></h2>
            <div id="dMeta" class="detailsMeta"></div>
            <div id="dSeller" class="detailsMeta"></div>
            <div id="dPrice" class="detailsPrice"></div>

            <div class="detailsCard">
              <h3>Ø§Ù„ÙˆØµÙ</h3>
              <p id="dDesc" class="descText"></p>
              <button id="btnReadMore" class="linkBtn hidden" type="button">Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø²ÙŠØ¯</button>
            </div>

            <div class="detailsCard">
              <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</h3>
              <div id="dInfo" class="infoGrid"></div>
            </div>

            <!-- keep wrong whatsapp report button (hidden) for existing JS -->
            <button id="btnReportWhatsapp" class="ghost hidden" type="button">ğŸš« Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ø±Ù‚Ù… Ø®Ø§Ø·Ø¦</button>

            <button id="btnDeleteListing" class="danger hidden" type="button" style="margin-top:12px;">Ø­Ø°Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</button>
          </div>

          <div class="actionBar">
            <button id="btnChat" class="btnMain" type="button">Ù…Ø±Ø§Ø³Ù„Ø©</button>
            <a id="btnWhatsapp" class="btnMain secondary hidden" href="#" target="_blank" rel="noopener">ÙˆØ§ØªØ³Ø§Ø¨</a>
            <button id="btnReportListing" class="btnMini ghost" type="button">ØªØ¨Ù„ÙŠØº</button>
          </div>
        </div>
      </div>
    </section>

    <!-- âœ… Toast -->
    <div id="toast" class="toast hidden" aria-live="polite"></div>

    <!-- INBOX PAGE -->
    <section id="inboxPage" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnInboxBack" class="ghost" type="button">Ø±Ø¬ÙˆØ¹</button>
          <h3 style="margin:0">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h3>
          <button id="btnInboxRefresh" class="secondary" type="button">ØªØ­Ø¯ÙŠØ«</button>
        </div>

        <div id="inboxList" class="inboxList"></div>

        <div id="inboxEmpty" class="muted small" style="display:none;margin-top:10px">
          Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹
        </div>
      </div>
    </section>

    <!-- ADD LISTING -->
    
    <section id="addBox" class="page hidden">
  <div class="pageInner card">
    <div class="pageHead addHead">
      <button id="btnAddBack" class="ghost backBtn" type="button" aria-label="Ø®Ø±ÙˆØ¬">â†’</button>
      <div class="addHeadTitle">Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯</div>
      <div class="muted small" id="uploadStatus"></div>
    </div>

    <!-- âœ… Ø«ÙˆØ§Ø¨Øª (Ù„Ø§ ØªØªØ­Ø±Ùƒ) -->
    <input id="aTitle" placeholder="Ù…Ø§Ø°Ø§ ØªØ¨ÙŠØ¹ØŸ (Ù…Ø«Ø§Ù„: Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø³Ø§Ù…Ø³ÙˆÙ†Øº A51)" />
    <textarea id="aDesc" placeholder="Ø§Ù„ÙˆØµÙ" rows="4"></textarea>

    <!-- âœ… Ø§Ù„Ø³Ø¹Ø± + Ø§Ù„Ø¹Ù…Ù„Ø© Ø¨Ù†ÙØ³ Ø§Ù„Ø³Ø·Ø± -->
    <div class="grid priceRow">
      <input id="aPrice" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø±" />
      <select id="aCurrency">
        <option value="Ù„.Ø³">SYP</option>
        <option value="USD">USD</option>
        <option value="EUR">EUR</option>
      </select>
    </div>
    <!-- âœ… Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ù…Ø¯ÙŠÙ†Ø© + Ù…Ù†Ø·Ù‚Ø©) -->
<div class="inlineRow">
  <div class="select-wrapper w33">
    <select id="aCity" class="fieldInput" required>
      <option value="">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ)</option>
    </select>
    <span class="arrow">â€º</span>
  </div>

  <div class="w67">
    <input id="aArea" class="fieldInput" placeholder="Ø§Ù„Ù…Ù†Ø·Ù‚Ø© / Ø§Ù„Ø´Ø§Ø±Ø¹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" />
  </div>
</div>
<!-- hidden value used for search/DB compatibility -->
<input id="aPlaceText" type="hidden" />


    <!-- âœ… Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„ -->
<input id="aPhone" type="tel" placeholder="Ø§Ø®ØªÙŠØ§Ø±ÙŠ: Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø¯ Ø«Ù… Ø§ÙƒØªØ¨ Ø±Ù‚Ù…Ùƒ" autocomplete="tel" />
    <input id="aPhoneE164" type="hidden" />

    <!-- âœ… Ø§Ù„ØµÙˆØ± (Ø«Ø§Ø¨ØªØ©) -->
<input id="aImages" type="file" accept="image/*" multiple />
    <div id="imgPreview" class="preview" style="margin-top:10px"></div>

    <!-- âœ… Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (Ø¨Ø¹Ø¯ Ø§Ù„ØµÙˆØ±) -->
    <div id="categoryBlock">
<div class="grid" style="margin-top:-6px">
        <select id="aCat"></select>
      </div>
    </div>

    <!-- âœ… Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…ØªØºÙŠØ±Ø© (ÙŠØªÙ… Ø­Ù‚Ù†Ù‡Ø§ Ø¨Ø§Ù„Ù€ JS Ø¯Ø§Ø®Ù„ Ù‡Ø°Ø§ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚) -->
    <div id="dynWrapAnchor"></div>

    <div class="row actions">
      <button id="btnPublish" type="button">Ù†Ø´Ø±</button>
      <button id="btnClear" class="secondary" type="button">Ù…Ø³Ø­</button>
    </div>
  </div>
</section>


    <!-- CHAT -->
    <section id="chatBox" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnChatBack" class="chatCloseBtn" type="button" aria-label="Ø¥ØºÙ„Ø§Ù‚">âœ•</button>
          <div class="chatHeadText">
            <h3 id="chatTitle" style="margin:0">Ù…Ø­Ø§Ø¯Ø«Ø©</h3>
            <div class="chatMeta" aria-label="Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©">
              <a id="chatUserLink" class="chatMetaLink" href="#" rel="noopener">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</a>
              <span class="chatMetaSep">â€¢</span>
              <a id="chatListingLink" class="chatMetaLink" href="#" rel="noopener">Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</a>
            </div>
          </div>
        </div>

        <div id="chatMsgs" class="chatmsgs"></div>

        <div class="row">
          <input id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©..." />
          <button id="btnSend" type="button">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>

        <p class="muted small">Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª ØªÙØ­Ø°Ù ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹ (Ù…ÙŠØ²Ø© Ù‚Ø§Ø¯Ù…Ø©).</p>
      </div>
    </section>

  </main>

  <!-- AUTH MODAL -->
    <div id="authModal" class="modal hidden">
    <div class="modalCard">
      <div class="modalHead">
        <div style="font-weight:900">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</div>
        <button id="btnCloseAuth" class="ghost" type="button">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>

      <div class="row">
        <input id="email" placeholder="Email" autocomplete="email" />
      </div>

      <div class="row" style="margin-top:10px">
        <input id="password" type="password" placeholder="Password" autocomplete="current-password" />
      </div>

      <div class="row actions" style="margin-top:12px">
        <button id="btnLogin" type="button">Ø¯Ø®ÙˆÙ„</button>
      </div>

      <p class="muted small" style="margin-top:10px">
        Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø®ØµØµ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙ‚Ø·. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† ÙŠØªØµÙØ­ÙˆÙ† ÙˆÙŠÙ†Ø´Ø±ÙˆÙ† ÙˆÙŠØªÙˆØ§ØµÙ„ÙˆÙ† ÙƒØ²ÙˆØ§Ø± Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„.
      </p>
    </div>
  </div>

  <!-- IMAGE MODAL -->
  <div id="imgModal" class="imgModal hidden">
    <div class="imgTop">
      <div id="imgCounter" class="imgCounter"></div>
      <button id="imgClose" class="ghost" type="button">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <button id="imgPrev" class="imgNav" type="button">â€¹</button>
    <img id="imgFull" class="imgFull" alt="full" />
    <button id="imgNext" class="imgNav" type="button">â€º</button>
  </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@23.8.0/build/js/intlTelInput.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@23.8.0/build/js/utils.js"></script>


  <!-- âœ… SAFE FALLBACK (Ø­ØªÙ‰ Ù„Ùˆ ØµØ§Ø± Ø­Ø¬Ø¨/Ø®Ø·Ø£ Ø¨Ø§Ù„Ù€ JS) -->
  <script>
  (function(){
    function fillSelect(sel, items, placeholder){
      if(!sel) return;
      if(sel.options && sel.options.length > 1) return;
      sel.innerHTML = "";
      var opt0 = document.createElement("option");
      opt0.value = "";
      opt0.textContent = placeholder || "";
      sel.appendChild(opt0);
      (items||[]).forEach(function(it){
        var o = document.createElement("option");
        o.value = it.value;
        o.textContent = it.label;
        sel.appendChild(o);
      });
    }

    var CATS = [
      {value:"cars",label:"Ø³ÙŠØ§Ø±Ø§Øª"},
      {value:"realestate",label:"Ø¹Ù‚Ø§Ø±Ø§Øª"},
      {value:"electronics",label:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª"},
      {value:"appliances",label:"ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ§Øª"},
      {value:"bikes",label:"Ø¯Ø±Ø§Ø¬Ø§Øª"},
      {value:"clothing",label:"Ù…Ù„Ø§Ø¨Ø³ ÙˆØ£Ø­Ø°ÙŠØ©"},
      {value:"other",label:"Ø£Ø®Ø±Ù‰"}
    ];

    var CITIES = [
      "Ø¯Ù…Ø´Ù‚","Ø­Ù„Ø¨","Ø­Ù…Øµ","Ø­Ù…Ø§Ø©","Ø§Ù„Ù„Ø§Ø°Ù‚ÙŠØ©","Ø·Ø±Ø·ÙˆØ³","Ø¥Ø¯Ù„Ø¨","Ø¯ÙŠØ± Ø§Ù„Ø²ÙˆØ±","Ø§Ù„Ø±Ù‚Ø©","Ø§Ù„Ø­Ø³ÙƒØ©","Ø§Ù„Ø³ÙˆÙŠØ¯Ø§Ø¡","Ø¯Ø±Ø¹Ø§","Ø§Ù„Ù‚Ù†ÙŠØ·Ø±Ø©"
    ].map(function(c){ return {value:c,label:c}; });

    fillSelect(document.getElementById("cityFilter"), CITIES, "ÙƒÙ„ Ø§Ù„Ù…Ø¯Ù†");
    fillSelect(document.getElementById("catFilter"), CATS, "ÙƒÙ„ Ø§Ù„Ø£ØµÙ†Ø§Ù");
    fillSelect(document.getElementById("aCity"), CITIES, "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ)");
    fillSelect(document.getElementById("aCat"), CATS, "Ø§Ø®ØªØ± ØµÙ†Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†");

    var ul = document.getElementById("userLabel");
    if(ul && (!ul.textContent || ul.textContent.trim()==="Ø²Ø§Ø¦Ø±")) ul.textContent = "Ù…Ø³ØªØ®Ø¯Ù…";
  })();
  </script>

  <script type="module" src="./app.js?v=20260109_23"></script>

  <!-- âœ… FAB: Add Listing (home only) -->
  <button id="fabAddListing" class="fab-add" type="button" aria-label="Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù†">â• Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù†</button>
  <script>
    (function(){
      var b = document.getElementById('fabAddListing');
      if(!b) return;

      function isVisible(id){
        var el = document.getElementById(id);
        return !!el && !el.classList.contains('hidden');
      }

      function updateFab(){
        // ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¨Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ø¹Ù†Ø¯ Ø¥Ø®ÙØ§Ø¡ ØµÙØ­Ø§Øª: Ø§Ù„ØªÙØ§ØµÙŠÙ„/Ø§Ù„Ø¥Ø¶Ø§ÙØ©/Ø§Ù„Ø´Ø§Øª/Ø§Ù„Ø±Ø³Ø§Ø¦Ù„)
        var show = !isVisible('detailsPage') && !isVisible('addBox') && !isVisible('chatBox') && !isVisible('inboxPage');
        b.style.display = show ? '' : 'none';
      }

      b.addEventListener('click', function(){
        try { window.UI && UI.actions && UI.actions.openAdd && UI.actions.openAdd(); }
        catch(e){}
      });

      // ØªØ­Ø¯ÙŠØ« Ù…Ø¨Ø¯Ø¦ÙŠ + Ù…Ø±Ø§Ù‚Ø¨Ø© Ø®ÙÙŠÙØ©
      updateFab();
      setInterval(updateFab, 400);
    })();
  </script>

</body>
</html>