<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Souq Syria</title>

  <link rel="stylesheet" href="./base.css">
  <link rel="stylesheet" href="./components.css">

  <script>
    document.documentElement.setAttribute("data-theme", "dark");
  </script>
</head>
<body>

  <header class="topbar">
    <div class="brand">
      <span class="dot"></span>
      Souq Syria
    </div>

    <!-- โ auth + avatar menu -->
    <div class="authbar" style="display:flex; align-items:center; gap:10px;">
      <div id="authBar"></div>

      <!-- โ ุตูุฑุฉ ุงูุญุณุงุจ + ูููู -->
      <div class="userMenuWrap" id="userMenuWrap" style="display:none;">
        <img
          id="userAvatar"
          class="avatar"
          src="./img/falcon.png"
          alt="account"
          style="width:38px;height:38px;border-radius:999px;object-fit:cover;border:1px solid rgba(255,255,255,.12);cursor:pointer;"
        />

        <div id="userMenu" class="userMenu hidden">
          <button type="button" data-act="myListings">๐ฆ ุฅุนูุงูุงุชู</button>
          <button type="button" data-act="favorites">โญ ููุถูุชู</button>
          <button type="button" data-act="profile">๐ค ุจุฑููุงููู</button>
          <hr />
          <button type="button" data-act="logout" class="danger">๐ช ุชุณุฌูู ุฎุฑูุฌ</button>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- SEARCH + FILTERS (DELUXE) -->
    <section class="card searchCard deluxeFilters">

      <div class="filterHead">
        <div class="filterTitle">ููุชุฑุฉ ุณุฑูุนุฉ</div>
        <button id="btnToggleFilters" class="ghost sm" type="button">ุฅุธูุงุฑ/ุฅุฎูุงุก</button>
      </div>

      <div class="formGrid" id="filtersBody">

        <div class="field span2">
          <label class="flabel">ุนู ูุงุฐุง ุชุจุญุซุ</label>
          <input id="qSearch" placeholder="ุจุญุซ ุนู ุฅุนูุงู..." />
        </div>

        <div class="field">
          <label class="flabel">ุงููุฏููุฉ</label>
          <select id="cityFilter"></select>
        </div>

        <div class="field">
          <label class="flabel">ุงููุณู</label>
          <select id="catFilter"></select>
        </div>

        <!-- โ ููุน ุงูุฅุนูุงู (Segemented) -->
        <div class="field span2">
          <label class="flabel">ููุน ุงูุฅุนูุงู</label>

          <div class="segWrap" role="group" aria-label="ููุน ุงูุฅุนูุงู">
            <button id="typeAll" class="segBtn active" type="button">ุงููู</button>
            <button id="typeSale" class="segBtn" type="button">ุจูุน</button>
            <button id="typeRent" class="segBtn" type="button">ุฅูุฌุงุฑ</button>
          </div>

          <input id="typeFilter" type="hidden" value="">
        </div>

        <!-- โ ุณูุฉ ุงูุณูุงุฑุงุช (ูู/ุฅูู) -->
        <div class="field span2">
          <label class="flabel">ุณูุฉ (ุณูุงุฑุงุช)</label>
          <div class="range2">
            <input id="yearFrom" type="number" min="1950" max="2035" placeholder="ูู" />
            <input id="yearTo" type="number" min="1950" max="2035" placeholder="ุฅูู" />
          </div>
        </div>

        <!-- โ ููุงุชุฑ ุงูุนูุงุฑุงุช -->
        <div id="estateFilters" class="field span2 hidden">
          <label class="flabel">ุชูุงุตูู ุงูุนูุงุฑ</label>
          <div class="range2">
            <select id="estateKindFilter">
              <option value="">ูู ุฃููุงุน ุงูุนูุงุฑุงุช</option>
              <option value="ุดูุฉ">ุดูุฉ</option>
              <option value="ูุญู">ูุญู</option>
              <option value="ุฃุฑุถ">ุฃุฑุถ</option>
              <option value="ุจูุช">ุจูุช</option>
            </select>

            <input id="roomsFilter" type="number" min="0" max="20" placeholder="ุบุฑู" />
          </div>
        </div>

        <div class="actionsGrid span2">
          <button id="btnApply" class="secondary" type="button">ุชุทุจูู</button>
          <button id="btnReset" class="ghost" type="button">ูุณุญ</button>
        </div>

        <div class="muted small span2" style="margin-top:2px">
          ููุงุญุธุฉ: ุงููููุน ูุนุฑุถ ูู ุงูุฅุนูุงูุงุช ุชููุงุฆูุงูุ ุงูููุงุชุฑ ุชููุนููู ููุท ุนูุฏ ุงูุถุบุท ุนูู "ุชุทุจูู".
        </div>

      </div>
    </section>

    <!-- LISTINGS -->
    <section class="card">
      <div class="sectionHead">
        <h3>ุงูุฅุนูุงูุงุช</h3>
        <button id="btnMore" class="secondary" type="button">ุชุญููู ุงููุฒูุฏ</button>
      </div>

      <div id="listings" class="cardsGrid"></div>

      <div id="emptyState" class="muted small" style="display:none;margin-top:10px">
        ูุง ููุฌุฏ ูุชุงุฆุฌ ุญุงููุงู
      </div>
    </section>

    <!-- DETAILS PAGE -->
    <section id="detailsPage" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnBack" class="ghost" type="button">ุฑุฌูุน</button>
          <button id="btnShare" class="secondary" type="button">ูุดุงุฑูุฉ</button>
        </div>

        <div class="gallery">
          <button id="gPrev" class="gbtn" type="button">โน</button>
          <img id="gImg" class="gimg" alt="image" />
          <button id="gNext" class="gbtn" type="button">โบ</button>
        </div>

        <div id="gDots" class="dots"></div>

        <h2 id="dTitle"></h2>
        <div class="muted" id="dMeta"></div>

        <!-- โ Stats (views + favorites) -->
        <div id="dStats" class="statsLine muted small"></div>

        <div id="dSeller" class="sellerLine"></div>

        <div class="price" id="dPrice"></div>

        <!-- โ Description (Read more) -->
        <div class="descBox">
          <p id="dDesc" class="descText"></p>
          <button id="btnReadMore" class="linkBtn hidden" type="button">ูุฑุงุกุฉ ุงููุฒูุฏ</button>
        </div>

        <!-- โ Actions -->
        <div class="row actions">
          <!-- โ Favorite -->
          <button id="btnFav" class="ghost" type="button" aria-label="ุฅุถุงูุฉ ููููุถูุฉ">
            <span class="heartIcon" aria-hidden="true">โฅ</span> <span id="dFavCount">0</span>
          </button>

          <button id="btnChat" type="button">ูุฑุงุณูุฉ</button>

          <!-- โ WhatsApp -->
          <a
            id="btnWhatsapp"
            class="secondary hidden"
            href="#"
            target="_blank"
            rel="noopener"
            aria-label="ูุฑุงุณูุฉ ุนุจุฑ ูุงุชุณุงุจ"
          >ูุงุชุณุงุจ</a>

          <!-- โ Report wrong WhatsApp number -->
          <button id="btnReportWhatsapp" class="ghost hidden" type="button">
            ๐ซ ุงูุฅุจูุงุบ ุนู ุฑูู ุฎุงุทุฆ
          </button>

          <button id="btnDeleteListing" class="danger hidden" type="button">ุญุฐู ุงูุฅุนูุงู</button>
        </div>
      </div>
    </section>

    <!-- โ Toast -->
    <div id="toast" class="toast hidden" aria-live="polite"></div>

    <!-- INBOX PAGE -->
    <section id="inboxPage" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnInboxBack" class="ghost" type="button">ุฑุฌูุน</button>
          <h3 style="margin:0">ุงูุฑุณุงุฆู</h3>
          <button id="btnInboxRefresh" class="secondary" type="button">ุชุญุฏูุซ</button>
        </div>

        <div id="inboxList" class="inboxList"></div>

        <div id="inboxEmpty" class="muted small" style="display:none;margin-top:10px">
          ูุง ููุฌุฏ ูุญุงุฏุซุงุช ุญุงููุงู
        </div>
      </div>
    </section>

    <!-- ADD LISTING -->
    <section id="addBox" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnAddBack" class="ghost" type="button">ุฑุฌูุน</button>
          <div class="muted small" id="uploadStatus"></div>
        </div>

        <h2>ุฅุนูุงู ุฌุฏูุฏ</h2>

        <input id="aTitle" placeholder="ุงูุนููุงู" />
        <textarea id="aDesc" placeholder="ุงููุตู" rows="4"></textarea>

        <div class="grid">
          <input id="aPrice" type="number" placeholder="ุงูุณุนุฑ" />
          <select id="aCurrency">
            <option value="SYP">SYP</option>
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
          </select>
        </div>

        <div class="grid">
          <select id="aCity"></select>
          <select id="aCat"></select>
        </div>

        <div class="muted small">ุงุฎุชุฑ ูู 1 ุฅูู 3 ุตูุฑ (ุญุฏ ุฃูุตู 3)</div>
        <input id="aImages" type="file" accept="image/*" multiple />
        <div id="imgPreview" class="preview"></div>

        <div class="row actions">
          <button id="btnPublish" type="button">ูุดุฑ</button>
          <button id="btnClear" class="secondary" type="button">ูุณุญ</button>
        </div>
      </div>
    </section>

    <!-- CHAT -->
    <section id="chatBox" class="page hidden">
      <div class="pageInner card">
        <div class="pageHead">
          <button id="btnChatBack" class="ghost" type="button">ุฑุฌูุน</button>
          <h3 id="chatTitle" style="margin:0">ูุญุงุฏุซุฉ</h3>
        </div>

        <div id="chatMsgs" class="chatmsgs"></div>

        <div class="row">
          <input id="chatInput" placeholder="ุงูุชุจ ุฑุณุงูุฉ..." />
          <button id="btnSend" type="button">ุฅุฑุณุงู</button>
        </div>

        <p class="muted small">ุงููุญุงุฏุซุงุช ุชูุญุฐู ุชููุงุฆููุง ูุงุญูุงู (ููุฒุฉ ูุงุฏูุฉ).</p>
      </div>
    </section>

  </main>

  <!-- AUTH MODAL -->
  <div id="authModal" class="modal hidden">
    <div class="modalCard">
      <div class="modalHead">
        <div style="font-weight:900">ุชุณุฌูู ุงูุฏุฎูู</div>
        <button id="btnCloseAuth" class="ghost" type="button">ุฅุบูุงู</button>
      </div>

      <div class="row">
        <input id="email" placeholder="Email" autocomplete="email" />
      </div>

      <div class="row" style="margin-top:10px">
        <input id="password" type="password" placeholder="Password" autocomplete="current-password" />
      </div>

      <div class="row actions" style="margin-top:12px">
        <button id="btnLogin" type="button">ุฏุฎูู</button>
        <button id="btnRegister" class="secondary" type="button">ุชุณุฌูู</button>
      </div>

      <button id="btnGoogle" class="secondary full" style="margin-top:10px" type="button">ุฏุฎูู ุนุจุฑ Google</button>
      <p class="muted small" style="margin-top:8px">Email + Google</p>
    </div>
  </div>

  <!-- IMAGE MODAL -->
  <div id="imgModal" class="imgModal hidden">
    <div class="imgTop">
      <div id="imgCounter" class="imgCounter"></div>
      <button id="imgClose" class="ghost" type="button">ุฅุบูุงู</button>
    </div>

    <button id="imgPrev" class="imgNav" type="button">โน</button>
    <img id="imgFull" class="imgFull" alt="full" />
    <button id="imgNext" class="imgNav" type="button">โบ</button>
  </div>

  <script type="module" src="./app.js?v=20260104_01"></script>
</body>
</html>